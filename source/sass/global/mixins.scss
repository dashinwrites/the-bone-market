$size-xxs: 480px !default;
$size-xs: 600px !default;
$size-sm: 768px !default;
$size-md: 1024px !default;
$size-lg: 1280px !default;
$size-xl: 1440px !default;
$size-xxl: 1900px !default;

$bp-xs: 480px;   // phones, narrow viewports
$bp-sm: 768px;   // tablets, small laptops
$bp-md: 1024px;  // standard laptops
$bp-lg: 1280px;  // desktops
$bp-xl: 1600px;  // large displays
$bp-xxl: 1920px; // 1080p+
$bp-4k: 2560px;  // 4K and ultrawide monitors

@mixin mq-up($class) {
    @if $class == xxs {
        @media (min-width: ($size-xxs +1)) { @content; }
    }
    @else if $class == xs {
        @media (min-width: ($size-xs +1)) { @content; }
    }
    @else if $class == sm {
        @media (min-width: ($size-sm +1)) { @content; }
    }
    @else if $class == md {
        @media (min-width: ($size-md +1)) { @content; }
    }
    @else if $class == lg {
        @media (min-width: ($size-lg +1)) { @content; }
    }
    @else if $class == xl {
        @media (min-width: ($size-xl +1)) { @content; }
    }
    @else if $class == xxl {
        @media (min-width: ($size-xxl +1)) { @content; }
    }
    @else {
        @warn "Breakpoint mixin supports: xxs to xxl";
    }
}

@mixin mq-down($class) {
    @if $class == xxs {
        @media (max-width: $size-xxs) { @content; }
    }
    @else if $class == xs {
        @media (max-width: $size-xs) { @content; }
    }
    @else if $class == sm {
        @media (max-width: $size-sm) { @content; }
    }
    @else if $class == md {
        @media (max-width: $size-md) { @content; }
    }
    @else if $class == lg {
        @media (max-width: $size-lg) { @content; }
    }
    @else if $class == xl {
        @media (max-width: $size-xl) { @content; }
    }
    @else if $class == xxl {
        @media (max-width: $size-xxl) { @content; }
    }
}

@mixin fluid-type($font-min, $font-max, $screen-min, $screen-max) {
    font-size: #{$font-min}px;

    @media only screen and (min-width: #{$screen-min}px) {
        font-size: calc(#{$font-min}px + #{($font-max - $font-min)} * (100vw - #{$screen-min}px) / (#{$screen-max} - #{$screen-min}));
    }

    @media only screen and (min-width: #{$screen-max}px) {
        font-size: #{$font-max}px;
    }
}

@mixin focus-ring($c: var(--accent-3)) {
  outline: none;
  box-shadow: 0 0 0 2px $c, 0 0 0 4px rgba(0,0,0,.15);
}

@mixin pseudo-frame($skip-top: false, $skip-solid: false, $radius: 4px) {
  position: relative;
  isolation: isolate;
  border-radius: $radius;

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    border: var(--border-1);
    @if $skip-top { border-top: none; }
    @if $skip-solid { border: none; }
    border-radius: inherit;
    pointer-events: none;
    z-index: -1;
  }

  &::after {
    content: "";
    position: absolute;
    inset: 2px;
    border: var(--bdash);
    opacity: .35;
    border-radius: inherit;
    pointer-events: none;
    z-index: -1;
  }
}

@mixin inner-line($inset: 2px, $border: var(--bdash), $opacity: .35) {
  &::after {
    content: "";
    position: absolute;
    inset: $inset;
    border: $border;
    opacity: $opacity;
    pointer-events: none;
    border-radius: inherit;
    z-index: -1;
  }
}

@mixin corner-ticks($inset: .5rem, $len: 18px, $thick: 2px, $opacity: .25) {
  &::after {
    content: "";
    position: absolute;
    inset: $inset;
    pointer-events: none;
    opacity: $opacity;
    background:
      linear-gradient(currentColor, currentColor) left   top    / #{$len} #{$thick} no-repeat,
      linear-gradient(currentColor, currentColor) left   top    / #{$thick} #{$len} no-repeat,
      linear-gradient(currentColor, currentColor) right  top    / #{$len} #{$thick} no-repeat,
      linear-gradient(currentColor, currentColor) right  top    / #{$thick} #{$len} no-repeat,
      linear-gradient(currentColor, currentColor) left   bottom / #{$len} #{$thick} no-repeat,
      linear-gradient(currentColor, currentColor) left   bottom / #{$thick} #{$len} no-repeat,
      linear-gradient(currentColor, currentColor) right  bottom / #{$len} #{$thick} no-repeat,
      linear-gradient(currentColor, currentColor) right  bottom / #{$thick} #{$len} no-repeat;
    z-index: 2;
  }
}

@mixin pseudo-border($skip-top: false, $radius: 4px) {
  position: relative;
  isolation: isolate;
  border-radius: $radius;

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    border: var(--border-1);
    @if $skip-top { border-top: none; }
    border-radius: inherit;
    pointer-events: none;
    z-index: -1;
  }
}

// Shared pseudo defaults for all plate modes
@mixin plate-base($which: before) {
  &::#{$which} {
    content: "";
    background-repeat: no-repeat;
    background-size: contain;
    background-position: center;
    pointer-events: none;
  }
}

// Placement variants
@mixin plate-watermark {
  @include plate-base(before);

  &::before {
    position: absolute;
    inset: 0;
    background-image: var(--plate-img);
    background-size: var(--plate-size, contain);
    background-position: var(--plate-pos, center);
    opacity: var(--plate-alpha, .18);
    mix-blend-mode: var(--plate-blend, multiply);
    z-index: 1; // below title/meta
  }
}

@mixin plate-side {
  display: grid;
  grid-template-columns: var(--plate-w, 96px) 1fr auto;
  column-gap: 1rem;
  block-size: var(--cat-head-h, 8rem);
  overflow: hidden;
  align-items: center;
  justify-content: center;

  @include plate-base(before);

  &::before {
    content: "";
    opacity: var(--plate-alpha);
    inline-size: var(--plate-w, 96px);
    block-size: calc(var(--cat-head-h, 8rem) * var(--cameo-scale, 1.6));
    background-image: var(--plate-img);
    background-repeat: no-repeat;
    background-size: contain;
    background-position: center;
    justify-self: center;
    align-self: center;
  }
}

@mixin plate-anchor {
  @include plate-base(after);

  &::after {
    position: absolute;
    left: 25%;
    transform: translateX(-50%);
    bottom: calc(-1 * var(--plate-h, 120px) * .28);
    width: var(--plate-w, 140px);
    height: var(--plate-h, 140px);
    background-image: var(--plate-img);
    opacity: var(--plate-alpha, .75);
    z-index: 1;
  }
}

/***********************************************
 The Bone Market — Member Group Gradients (RGB)
 SCSS maps + mixins to auto-generate classes.
***********************************************/

/* ── 1) GRADIENT MAPS ───────────────────────── */
$gradients-precious: (
  obsidian: linear-gradient(135deg, rgb(11,11,12), rgb(58,58,61)),
  quartz:   linear-gradient(135deg, rgb(230,226,221), rgb(207,201,196)),
  onyx:     linear-gradient(135deg, rgb(27,27,27),   rgb(64,64,64)),
  amber:    linear-gradient(135deg, rgb(255,179,71), rgb(255,204,51)),
  jade:     linear-gradient(135deg, rgb(63,163,116), rgb(161,209,157)),
  silver:   linear-gradient(135deg, rgb(215,215,215),rgb(158,164,173))
);

$gradients-anatomy: (
  marrow: linear-gradient(135deg, rgb(241,230,220), rgb(187,169,152)),
  sinew:  linear-gradient(135deg, rgb(213,169,129), rgb(140,91,60)),
  blood:  linear-gradient(135deg, rgb(122,13,29),   rgb(217,43,43)),
  vein:   linear-gradient(135deg, rgb(33,51,77),    rgb(72,107,148)),
  bone:   linear-gradient(135deg, rgb(231,223,211), rgb(182,169,154)),
  flesh:  linear-gradient(135deg, rgb(245,195,181), rgb(217,143,128))
);

$gradients-celestial: (
  eclipse: linear-gradient(135deg, rgb(25,25,25),   rgb(74,59,94)),
  nova:    linear-gradient(135deg, rgb(255,138,0),  rgb(255,61,0)),
  comet:   linear-gradient(135deg, rgb(75,143,210), rgb(197,223,255)),
  orbit:   linear-gradient(135deg, rgb(67,74,92),   rgb(119,130,161)),
  umbra:   linear-gradient(135deg, rgb(13,12,27),   rgb(59,58,98)),
  zenith:  linear-gradient(135deg, rgb(246,229,141),rgb(249,202,36))
);

$gradients-flora: (
  hemlock:    linear-gradient(135deg, rgb(28,59,50),  rgb(61,102,86)),
  nightshade: linear-gradient(135deg, rgb(59,26,74),  rgb(113,59,134)),
  yew:        linear-gradient(135deg, rgb(20,61,38),  rgb(50,105,74)),
  ivy:        linear-gradient(135deg, rgb(38,77,53),  rgb(108,169,127)),
  rowan:      linear-gradient(135deg, rgb(93,23,20),  rgb(156,59,46)),
  thorn:      linear-gradient(135deg, rgb(115,46,46), rgb(182,75,75))
);

$gradients-trade: (
  ivory:  linear-gradient(135deg, rgb(255,248,238), rgb(217,203,176)),
  velvet: linear-gradient(135deg, rgb(56,27,63),    rgb(106,46,103)),
  spice:  linear-gradient(135deg, rgb(196,122,52),  rgb(255,177,94)),
  smoke:  linear-gradient(135deg, rgb(46,46,46),    rgb(154,154,154)),
  glass:  linear-gradient(135deg, rgb(227,238,243), rgb(163,184,194)),
  gold:   linear-gradient(135deg, rgb(212,175,55),  rgb(245,215,110))
);

/* Master map (merge all). Order determines cascade if names ever collide. */
$gradients-all: map-merge(
  map-merge(
    map-merge($gradients-precious, $gradients-anatomy),
    map-merge($gradients-celestial, $gradients-flora)
  ),
  $gradients-trade
);

/* ── 2) CORE MIXINS ─────────────────────────── */

/* Utility: create classes like `.membergroup--obsidian` with a CSS var for reuse */
@mixin mg-emit-vars($map, $prefix: "membergroup") {
  @each $name, $grad in $map {
    .#{$prefix}--#{$name} {
      --mg-gradient: #{$grad};
    }
  }
}

/* Pill style (filled chip/badge) */
@mixin mg-pill($map, $prefix: "membergroup") {
  @each $name, $grad in $map {
    .#{$prefix}--#{$name}.is-pill {
      --mg-gradient: #{$grad};
      background: var(--mg-gradient);
      color: rgb(28,28,28); /* readable on most light gradients */
      /* If your theme is dark, force white text: */
      &.on-dark { color: rgb(245,245,245); }
      border-radius: 999px;
      padding: .3rem .65rem;
      display: inline-flex;
      align-items: center;
      gap: .4rem;
      border: 1px solid rgba(0,0,0,.12);
      box-shadow: 0 0 0 1px rgba(255,255,255,.06) inset;
    }
  }
}

/* Outline style (transparent fill; gradient border) */
@mixin mg-outline($map, $prefix: "membergroup") {
  @each $name, $grad in $map {
    .#{$prefix}--#{$name}.is-outline {
      --mg-gradient: #{$grad};
      background: transparent;
      color: inherit;
      border: 2px solid transparent;
      border-radius: 999px;
      padding: .25rem .6rem;
      /* border-image supports gradients nicely */
      border-image: var(--mg-gradient) 1;
    }
  }
}

/* Text gradient style (keeps container transparent) */
@mixin mg-text($map, $prefix: "membergroup") {
  @each $name, $grad in $map {
    .#{$prefix}--#{$name}.is-text {
      --mg-gradient: #{$grad};
      background: var(--mg-gradient);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      /* optional subtle stroke for dark bg legibility */
      -webkit-text-stroke: .5px rgba(0,0,0,.25);
    }
    /* stronger stroke helper for very light backgrounds */
    .#{$prefix}--#{$name}.is-text.on-light {
      -webkit-text-stroke: .65px rgba(0,0,0,.35);
    }
  }
}

/* ── 3) ONE-LINE API TO GENERATE EVERYTHING ─── */
@mixin membergroups-generate($map, $prefix: "membergroup") {
  @include mg-emit-vars($map, $prefix);
  @include mg-pill($map, $prefix);
  @include mg-outline($map, $prefix);
  @include mg-text($map, $prefix);
}

/* ── 4) CALLS — generate per-set or all at once ─ */
@include membergroups-generate($gradients-precious);
@include membergroups-generate($gradients-anatomy);
@include membergroups-generate($gradients-celestial);
@include membergroups-generate($gradients-flora);
@include membergroups-generate($gradients-trade);

/* Or: just this one line if you prefer a single pass */
// @include membergroups-generate($gradients-all);

/* ── 5) EXAMPLES (delete/keep as docs) ──────── */
/* HTML usage:
  <span class="membergroup--obsidian is-pill">Obsidian</span>
  <span class="membergroup--blood is-outline">Blood</span>
  <span class="membergroup--nova is-text">Nova</span>

  // Optional legibility helpers based on page theme:
  <span class="membergroup--jade is-pill on-dark">Jade</span>
  <span class="membergroup--glass is-text on-light">Glass</span>
*/

/*************************************************
 Utility: apply membergroup gradients to anything
**************************************************/

/* 1) Set the active gradient from the master map */
@mixin mg-set($name, $fallback: linear-gradient(135deg, rgb(58,58,61), rgb(27,27,27))) {
  $g: map-get($gradients-all, $name);
  --mg-gradient: #{if($g, $g, $fallback)};
}

/* 2) Gradient BORDER (perfect with rounded corners)
   Uses twin-background trick so border-radius is honored.  */
@mixin mg-border($width: 2px, $radius: 8px, $bg: var(--bg, rgb(26,26,26))) {
  position: relative;
  border: $width solid transparent;
  border-radius: $radius;
  background:
    linear-gradient(#{$bg}, #{$bg}) padding-box,
    var(--mg-gradient, linear-gradient(135deg, rgb(58,58,61), rgb(27,27,27))) border-box;
}

/* 3) Gradient FILL (full background) */
@mixin mg-fill($radius: null) {
  background: var(--mg-gradient, linear-gradient(135deg, rgb(58,58,61), rgb(27,27,27)));
  @if $radius != null { border-radius: $radius; }
}

/* 4) Gradient OVERLAY (keeps original bg; adds gradient veil via ::after) */
@mixin mg-overlay($alpha: .35, $radius: inherit) {
  position: relative;
  &::after {
    content: "";
    position: absolute; inset: 0;
    border-radius: $radius;
    background: var(--mg-gradient, linear-gradient(135deg, rgb(58,58,61), rgb(27,27,27)));
    opacity: $alpha;
    pointer-events: none;
    mix-blend-mode: multiply; /* try screen for light themes */
  }
}

/* 5) Gradient TEXT (transparent fill with optional stroke) */
@mixin mg-textual($stroke: .5px, $stroke-color: rgba(0,0,0,.25)) {
  background: var(--mg-gradient, linear-gradient(135deg, rgb(58,58,61), rgb(27,27,27)));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  -webkit-text-stroke: $stroke $stroke-color;
}

/* 6) Gradient RULE (thin bars/dividers) */
@mixin mg-rule($height: 2px, $radius: 999px) {
  height: $height;
  border-radius: $radius;
  background: var(--mg-gradient, linear-gradient(135deg, rgb(58,58,61), rgb(27,27,27)));
}

/* 7) Corner ticks fed by gradient (works with your corner-ticks aesthetic)
   Creates an inset frame using ::before so it plays nice with your own mixin. */
@mixin mg-corner-ticks-frame($inset: .5rem, $radius: 6px, $opacity: .35, $style: dashed) {
  position: relative;
  &::before {
    content: "";
    position: absolute; inset: $inset;
    border-radius: $radius;
    /* gradient stroke via border-image for the "frame" */
    border: 2px #0000; /* transparent shim for border-image */
    border-image: var(--mg-gradient, linear-gradient(135deg, rgb(58,58,61), rgb(27,27,27))) 1;
    opacity: $opacity;
    pointer-events: none;
  }
  /* If you want dashed look inside the gradient frame, add a mask: */
  &::before {
    @if $style == dashed {
      /* creates dashes by masking the gradient frame */
      -webkit-mask: 
        linear-gradient(#000 0 0) padding-box,
        repeating-linear-gradient(90deg, #000 0 8px, #0000 8px 14px) border-box;
      mask: 
        linear-gradient(#000 0 0) padding-box,
        repeating-linear-gradient(90deg, #000 0 8px, #0000 8px 14px) border-box;
    }
  }
}

/* 8) One-liners to scope by name (sugar helpers)
   Usage: @include mg-apply-border(blood); etc. */
@mixin mg-apply-border($name, $width: 2px, $radius: 8px, $bg: var(--bg, rgb(26,26,26))) {
  @include mg-set($name);
  @include mg-border($width, $radius, $bg);
}
@mixin mg-apply-fill($name, $radius: null) {
  @include mg-set($name);
  @include mg-fill($radius);
}
@mixin mg-apply-text($name, $stroke: .5px, $stroke-color: rgba(0,0,0,.25)) {
  @include mg-set($name);
  @include mg-textual($stroke, $stroke-color);
}
@mixin mg-apply-rule($name, $height: 2px, $radius: 999px) {
  @include mg-set($name);
  @include mg-rule($height, $radius);
}
@mixin mg-apply-overlay($name, $alpha: .35, $radius: inherit) {
  @include mg-set($name);
  @include mg-overlay($alpha, $radius);
}
