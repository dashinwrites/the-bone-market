@charset "UTF-8";
/* =========================================
   Plate Button Mixin (theme-toggle style)
   ========================================= */
/* Optional: current/active state helper */
/* Optional: tooltip pulled from a data attribute (e.g., data-label) */
/* ================================================
   Plate-button look for cover tokens
   ================================================ */
/* Reusable mixin (oval by default) */
/* Optional: respect prefers-reduced-motion on anything you include this on */
/* Gradient underline mixin */
/*******************************
   Board Stats
********************************/
/* --------------------------------
   Global DX tokens for this module
--------------------------------- */
:root {
  --stats-pad-inset: 0.5rem;
  --stats-gap: 1rem; }

/* --------------------------------
   Reusable helpers (mixins)
--------------------------------- */
/* ---------------- Container ---------------- */
#boardstats.bm-stats {
  margin: 2rem auto;
  padding: 1rem 1rem 1.25rem;
  max-inline-size: clamp(820px, 80vw, 1280px);
  position: relative;
  color: var(--text-clear);
  background: var(--bg-1-rgb);
  border: var(--border-1);
  border-radius: 8px;
  box-shadow: var(--plate-shadow); }
  #boardstats.bm-stats::before {
    content: "";
    position: absolute;
    inset: 0.6rem;
    opacity: 0.35;
    pointer-events: none; }
  #boardstats.bm-stats::after {
    content: "";
    position: absolute;
    inset: 0.6rem;
    pointer-events: none;
    opacity: 0.25;
    background: linear-gradient(currentColor, currentColor) left top / 18px 2px no-repeat, linear-gradient(currentColor, currentColor) left top / 2px 18px no-repeat, linear-gradient(currentColor, currentColor) right top / 18px 2px no-repeat, linear-gradient(currentColor, currentColor) right top / 2px 18px no-repeat, linear-gradient(currentColor, currentColor) left bottom / 18px 2px no-repeat, linear-gradient(currentColor, currentColor) left bottom / 2px 18px no-repeat, linear-gradient(currentColor, currentColor) right bottom / 18px 2px no-repeat, linear-gradient(currentColor, currentColor) right bottom / 2px 18px no-repeat;
    z-index: 2; }

/* ---------------- Header ---------------- */
.bm-stats__header {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: end;
  gap: 1rem;
  margin-block-end: 1rem; }
  @media (max-width: 720px) {
    .bm-stats__header {
      grid-template-columns: 1fr;
      align-items: start;
      gap: 0.5rem; } }

.bm-stats__title {
  margin: 0;
  font-family: var(--font-serif);
  letter-spacing: 0.12em;
  text-transform: lowercase; }

/* quick totals */
.bm-stats__totals {
  --pad: 0.4rem 0.6rem;
  display: grid;
  grid-auto-flow: column;
  gap: 0.5rem;
  list-style: none;
  margin: 0;
  padding: 0; }
  .bm-stats__totals li {
    display: grid;
    grid-template-rows: auto auto;
    justify-items: center;
    min-inline-size: 8ch;
    /* was 9ch */
    padding: var(--pad);
    position: relative;
    background: var(--bg-2);
    border: var(--border-1);
    border-radius: 6px; }
    .bm-stats__totals li::after {
      content: "";
      position: absolute;
      inset: 0.35rem;
      border: var(--bdash);
      border-radius: 4px;
      opacity: 0.25;
      pointer-events: none; }
    .bm-stats__totals li span {
      font-size: 0.8rem;
      color: var(--text-loCon);
      text-transform: lowercase; }
    .bm-stats__totals li b {
      font-size: 1.1rem;
      font-weight: 700;
      /* tabular if font supports it */
      font-feature-settings: "tnum" 1, "ss01" 1; }
  @media (max-width: 900px) {
    .bm-stats__totals {
      grid-auto-flow: row;
      grid-template-columns: repeat(2, minmax(0, 1fr)); } }

/* ---------------- Grid layout ---------------- */
.bm-stats__grid {
  display: grid;
  gap: var(--stats-gap);
  grid-template-columns: repeat(12, 1fr); }
  .bm-stats__grid .bm-card--today,
  .bm-stats__grid .bm-card--now {
    grid-column: span 6; }
  .bm-stats__grid .bm-card--legend {
    grid-column: span 4; }
  .bm-stats__grid .bm-card--recent {
    grid-column: span 8; }
  @media (max-width: 1080px) {
    .bm-stats__grid .bm-card--today,
    .bm-stats__grid .bm-card--now,
    .bm-stats__grid .bm-card--legend,
    .bm-stats__grid .bm-card--recent {
      grid-column: 1 / -1; } }

/* ---------------- Card ---------------- */
.bm-card {
  position: relative;
  padding: 1rem;
  background: var(--bg-2);
  border: var(--border-1);
  border-radius: 6px; }

.bm-card__title {
  margin: 0 0 0.5rem;
  font-family: var(--font-serif);
  font-size: var(--size-lg, 1.1rem); }

.bm-card__meta,
.bm-card__hint {
  margin: 0 0 0.5rem;
  color: var(--text-loCon); }

.bm-card__list {
  line-height: 1.6; }

.bm-card__list--wrap {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem 0.75rem; }

/* Toolbar */
.bm-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 0.6rem 0.9rem;
  margin-block: 0.25rem 0.75rem; }
  .bm-toolbar a {
    font-size: 0.95rem;
    text-decoration: underline; }

/* ---------------- Legend ---------------- */
.bm-legend {
  display: grid;
  gap: 0.4rem;
  list-style: none;
  margin: 0;
  padding: 0; }
  .bm-legend li {
    display: grid;
    grid-auto-flow: column;
    align-items: center;
    justify-content: start;
    gap: 0.6rem; }

.chip {
  inline-size: 14px;
  block-size: 14px;
  display: inline-block;
  border-radius: 50%;
  border: 2px solid rgba(0, 0, 0, 0.25);
  /* fallback */ }
  @supports (color: color-mix(in oklab, black, white)) {
    .chip {
      border-color: color-mix(in oklab, currentColor 25%, transparent); } }

/* Example colors; replace with your tokens */
.chip--celestial {
  background: var(--celestial, #a0b4ff); }

.chip--flora {
  background: var(--flora, #aad7aa); }

.chip--anatomy {
  background: var(--anatomy, #f0b4b4); }

.chip--material {
  background: var(--material, #d2bea0); }

/* ---------------- Recent Topics (table â†’ list look) ---------------- */
.bm-card--recent {
  max-block-size: var(--stats-pane-h);
  overflow: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  padding: 0.25rem;
  /* each topic card */
  /* reset jcink legacy */
  /* Title */
  /* Author line */
  /* Date line */
  /* remove jcink empty link */
  /* links */
  /* Mobile wrap for author line */ }
  .bm-card--recent #recent-topics {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem; }
    @media (max-width: 880px) {
      .bm-card--recent #recent-topics {
        grid-template-columns: 1fr;
        /* stack on smaller screens */ } }
    .bm-card--recent #recent-topics .maintitle, .bm-card--recent #recent-topics hr, .bm-card--recent #recent-topics table > tbody > tr:first-child {
      display: none !important; }
  .bm-card--recent table,
  .bm-card--recent tbody {
    display: contents; }
  .bm-card--recent tr {
    display: grid;
    grid-template-rows: auto auto auto;
    align-items: start;
    gap: 0.05rem;
    padding: 1rem;
    position: relative;
    background: var(--bg-2);
    box-shadow: var(--plate-shadow); }
  .bm-card--recent .row4,
  .bm-card--recent .recent-topics-info,
  .bm-card--recent .recent-topics-date {
    background: none;
    border: 0;
    padding: 0;
    width: auto; }
  .bm-card--recent .recent-topics-info > a:first-child strong {
    display: inline-block;
    font-weight: 700;
    text-underline-offset: 0.12em;
    max-inline-size: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap; }
  .bm-card--recent .recent-topics-info > .rt-author {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
    color: var(--text-loCon);
    font-family: var(--font-sans);
    font-size: var(--size-md);
    text-transform: lowercase; }
    .bm-card--recent .recent-topics-info > .rt-author::before {
      content: "fig. 01";
      white-space: nowrap;
      font-variant: all-small-caps;
      font-family: var(--font-hand);
      opacity: 0.9; }
    .bm-card--recent .recent-topics-info > .rt-author a {
      white-space: nowrap;
      color: var(--text-clear); }
  .bm-card--recent .recent-topics-date {
    display: grid;
    grid-template-columns: clamp(4px, 12vw, 36px) 1fr;
    align-items: center;
    column-gap: 0.75rem;
    color: var(--text-loCon);
    font-size: var(--size-lg);
    font-family: var(--font-sans);
    font-variant: all-small-caps;
    justify-self: start;
    letter-spacing: 0.05rem; }
    .bm-card--recent .recent-topics-date::before {
      content: "";
      inline-size: 100%;
      block-size: 1px;
      background: var(--accent-1);
      opacity: 0.8;
      display: block; }
  .bm-card--recent .recent-topics-info > a:empty {
    display: none; }
  .bm-card--recent :where(a) {
    text-underline-offset: 0.15em; }
  @media (max-width: 420px) {
    .bm-card--recent .recent-topics-info > .rt-author {
      flex-wrap: wrap;
      row-gap: 0.25rem; } }

/* title link (consolidated once) */
.rt-title {
  display: inline-block;
  max-inline-size: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-transform: lowercase;
  font-family: var(--font-serif);
  font-size: calc(var(--size-forum-title) - 4px);
  transition: var(--transi-med);
  position: relative;
  /* for underline animation */ }
  .rt-title:hover {
    letter-spacing: 0.05rem; }
  .rt-title::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    inline-size: 100%;
    block-size: 1px;
    background: var(--accent-1);
    transform: scaleX(0);
    transform-origin: bottom right;
    transition: transform 0.25s ease-in-out; }
  .rt-title:hover::after, .rt-title:focus-visible::after {
    transform: scaleX(1);
    transform-origin: bottom left; }

/* ---------------- Scroll panes (shared) ---------------- */
.bm-card--today .bm-card__list,
.bm-card--now .bm-card__list {
  max-block-size: var(--stats-pane-h);
  overflow: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  padding-inline-end: 0.25rem; }

/* Stable scrollbars where supported */
@supports (scrollbar-gutter: stable) {
  .bm-card--today .bm-card__list,
  .bm-card--now .bm-card__list,
  .bm-card--recent #recent-topics {
    scrollbar-gutter: stable; } }

/* Nice thin scrollbars (shared) */
.bm-card--today .bm-card__list,
.bm-card--now .bm-card__list,
.bm-card--recent #recent-topics {
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.35) transparent; }
  .bm-card--today .bm-card__list::-webkit-scrollbar,
  .bm-card--now .bm-card__list::-webkit-scrollbar,
  .bm-card--recent #recent-topics::-webkit-scrollbar {
    width: 10px;
    height: 10px; }
  .bm-card--today .bm-card__list::-webkit-scrollbar-thumb,
  .bm-card--now .bm-card__list::-webkit-scrollbar-thumb,
  .bm-card--recent #recent-topics::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.2));
    border: 2px solid transparent;
    background-clip: padding-box;
    border-radius: 8px; }
  .bm-card--today .bm-card__list::-webkit-scrollbar-track,
  .bm-card--now .bm-card__list::-webkit-scrollbar-track,
  .bm-card--recent #recent-topics::-webkit-scrollbar-track {
    background: transparent; }

/* Focus visibility inside scrollers */
.bm-card--today .bm-card__list :focus,
.bm-card--now .bm-card__list :focus,
.bm-card--recent #recent-topics :focus {
  outline: 2px solid currentColor;
  outline-offset: 2px; }

/* Short viewports: allow a bit taller panes */
@media (max-height: 720px) {
  :root {
    --stats-pane-h: clamp(220px, 50vh, 420px); } }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .rt-title {
    transition: none; }
  .rt-title::after {
    transition: none; } }

/* ---------------- Utilities ---------------- */
.thin {
  font-size: 0.95em;
  opacity: 0.95; }

.bm-card--recent #recent-topics {
  align-items: stretch; }

.bm-card--recent #recent-topics tr {
  display: grid;
  grid-template-rows: auto 1fr auto;
  /* title / flexible / date */ }
